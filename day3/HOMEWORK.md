# Day3任意宿題  
### 目的：  
RAG技術を用いたLLMの改善プロセスを体験し、実際のアプリケーション開発の実践力を養う

### 概要：  
RAG（Retrieval-Augmented Generation）を用いて、LLMの生成内容を改善する体験を行った。演習で利用したコードをベースに、独自の質問と参照文書を用いて実験を行い、RAGの効果を定性ベースで評価した（*定量評価の導入は今後の課題）。テストデータの作成について理解が深まった。

<br>

## 1.質問設計の観点と意図  
演習と同様に、2024年4月リリースのMeta-Llama-3が持ち合わせていない知識を質問することで「純粋なベースライン vs RAG学習後」の差異分析を行った。

### ● 質問設計:以下の５つの質問を作成  

   > "2025年5月のアメリカ合衆国大統領は誰か？" →（目的）ベースラインが知識を持たないことの確認

   > "国際貿易取引におけるトランプ関税とは？" →（目的）シンプルにRAGの効果を見る

   > "日本のアメリカ向け自動車輸出にかかる関税は何％か？" →（目的）正確性・完全性が担保されているかの確認

   > "日本のアメリカ向け海産物輸出にかかる関税は何％か？" →（目的）正確性・完全性が担保されているかの確認

   > "今後、アメリカの関税はどのような方向に動くと考えられるか？" →（目的）未来のことを聞いた時にどのような変化をするかの確認

### ● 参照文書:日経新聞の記事より引用

● 質問設計: 単純な事実確認だけでなく、**複数の情報を組み合わせる必要がある質問**や、**最新情報が必要な質問**など
● 参照文書: 質問に直接関連する情報と、**あえて関連性の低い情報を混ぜる**ことで、RAGの検索精度も評価できます

<br>

## 2.RAGの実装方法と工夫点  
以下の2つの方法で回答を生成した。回答の評価指標は、今回は時間の都合上、人間が定性的に正確性・完全性・関連性を評価を用いた。（Llama3モデルによるYes/No自動判定は時間の都合上行わず）

### (1)．ベースのLLM（RAGなし）での回答生成  

   > "2025年5月のアメリカ合衆国大統領は、当時まだ選出されていない人物です。"

   > "トランプ関税は、2018年、ドナルド・トランプ米大統領が発令した、中国に対する関税のことです。トランプ関税は、中国の貿易赤字削減やアメリカの経済成長を目的として、中国の輸入品に対して25%の関税を課すなど、中国との貿易関係を改めることを目指しています。"

   > "日本のアメリカ向け自動車輸出にかかる関税は、25%です。日本の自動車メーカーは、米国市場での競争力を高めるため、輸出品の価格を低下させる必要があります。"

   > "日本のアメリカ向け海産物輸出にかかる関税は、3.5%です。日本の漁業者は、米国市場での競争力を高めるため、輸出品の価格を低下させる必要があります。"

   > "アメリカの関税は、将来的には、中国との貿易関係改善や米国経済の成長を目的として、中国に対する関税の引き下げや新たな貿易協定の締結など、中国との貿易関係を改める方向に動くと考えられます。ただし、政治的な情勢や経済的な状況によって、関税の方向は変化する可能性があります。"


### (2)．RAGを組み合わせた回答生成


<br>

## 3.結果の分析と考察  
この結果から、RAGパイプラインにおける情報の質と関連性の重要性であり、検索で取得した情報を単に増やすだけでなく、その情報の関連性を精査する方法を学ぶことができた。

○ 生成した結果をまとめ、RAGありとRAGなしの差異を分析してください
○ RAGによって回答が改善したケースと悪化したケースの両方について考察してください
○ 結果に基づいて、RAGの有効性と限界についての考察を記述してください

## 4.発展的な改善案(任意)  
時間の都合上、今回行わず。チャンク分割サイズの工夫や、埋込みモデルを変更するとどうなるか等を試したかったが、最終課題に取り組むさいの課題とした。
